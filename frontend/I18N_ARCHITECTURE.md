# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ i18n

## ğŸ“ Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER                                 â”‚
â”‚                    Clicks Globe ğŸŒ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LanguageContext                             â”‚
â”‚  - Current Locale: 'en' | 'az'                              â”‚
â”‚  - setLocale(newLocale)                                     â”‚
â”‚  - Saves to localStorage                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Next.js Router                              â”‚
â”‚  Updates URL: / â†’ /az/                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Middleware                                â”‚
â”‚  1. Detects locale from URL                                 â”‚
â”‚  2. Adds locale to request                                  â”‚
â”‚  3. Routes to correct page                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                 â”‚
         â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server Layout   â”‚            â”‚  Client Component â”‚
â”‚                  â”‚            â”‚                   â”‚
â”‚  getLocale()     â”‚            â”‚  useTranslations()â”‚
â”‚  getMessages()   â”‚            â”‚                   â”‚
â”‚      â†“           â”‚            â”‚       â†“           â”‚
â”‚  Pass to Client  â”‚            â”‚   Get from        â”‚
â”‚   Providers      â”‚            â”‚   NextIntlProviderâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  messages/en.json      â”‚
            â”‚  messages/az.json      â”‚
            â”‚                        â”‚
            â”‚  Translation Files     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ°

### Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Server-side)

```typescript
1. Request â†’ http://localhost:3000/products

2. Middleware.ts
   â†“
   - Check URL for locale (/az/products)
   - Check localStorage (paul-locale)
   - Default to 'en'
   â†“
   Locale = 'en'

3. layout.tsx (Server Component)
   â†“
   const locale = await getLocale();         // 'en'
   const messages = await getMessages();      // Load en.json
   â†“
   Pass to Providers

4. Providers.tsx (Client Component)
   â†“
   <NextIntlClientProvider locale={locale} messages={messages}>
     <LanguageProvider initialLocale={locale}>
       {children}
     </LanguageProvider>
   </NextIntlClientProvider>
```

### Ğ ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°

```typescript
5. Component (Client)
   â†“
   const t = useTranslations('header');
   â†“
   {t('findAPaul')}  // Reads from messages object
   â†“
   Output: "Find a PAUL" (en) Ğ¸Ğ»Ğ¸ "PAUL Tap" (az)
```

### Ğ¡Ğ¼ĞµĞ½Ğ° ÑĞ·Ñ‹ĞºĞ°

```typescript
1. User clicks Globe icon
   â†“
2. handleLanguageToggle()
   â†“
3. LanguageContext.setLocale('az')
   â†“
4. localStorage.setItem('paul-locale', 'az')
   â†“
5. router.push('/az/current-path')
   â†“
6. Page reloads with new locale
   â†“
7. Middleware detects /az/ prefix
   â†“
8. Layout loads az.json
   â†“
9. All components re-render with Azerbaijani text
```

## ğŸ“¦ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

```
App Root
â”‚
â”œâ”€â”€ RootLayout (Server Component)
â”‚   â”œâ”€â”€ getLocale()
â”‚   â”œâ”€â”€ getMessages()
â”‚   â””â”€â”€ <html lang={locale}>
â”‚       â””â”€â”€ Providers (Client Component)
â”‚           â”œâ”€â”€ NextIntlClientProvider
â”‚           â”‚   â””â”€â”€ LanguageProvider
â”‚           â”‚       â””â”€â”€ QueryClientProvider
â”‚           â”‚           â””â”€â”€ AuthProvider
â”‚           â”‚               â””â”€â”€ CartProvider
â”‚           â”‚                   â””â”€â”€ {children}
â”‚
â””â”€â”€ Page Components
    â”œâ”€â”€ Header
    â”‚   â”œâ”€â”€ useTranslations('header')
    â”‚   â”œâ”€â”€ useLanguage() â†’ { locale, setLocale }
    â”‚   â””â”€â”€ Globe Button â†’ toggleLanguage()
    â”‚
    â”œâ”€â”€ Hero
    â”‚   â””â”€â”€ useTranslations('hero')
    â”‚
    â”œâ”€â”€ Footer
    â”‚   â””â”€â”€ useTranslations('footer')
    â”‚
    â””â”€â”€ CartModal
        â””â”€â”€ useTranslations('cart')
```

## ğŸ—‚ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¾Ğ²

```json
messages/en.json
{
  "common": {          // ĞĞ±Ñ‰Ğ¸Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹
    "loading": "...",
    "error": "...",
    "save": "..."
  },
  "header": {          // Ğ¡Ğ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Header
    "findAPaul": "...",
    "clickCollect": "..."
  },
  "cart": {            // Ğ¡Ğ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Cart
    "title": "...",
    "empty": "...",
    "checkout": "..."
  }
}
```

### Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ ĞºĞ»ÑÑ‡ĞµĞ¹

```
ROOT
â”œâ”€â”€ common/              [ĞŸĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ]
â”‚   â”œâ”€â”€ actions
â”‚   â”œâ”€â”€ statuses
â”‚   â””â”€â”€ messages
â”‚
â”œâ”€â”€ header/              [Navigation]
â”‚   â”œâ”€â”€ menu items
â”‚   â”œâ”€â”€ actions
â”‚   â””â”€â”€ search
â”‚
â”œâ”€â”€ footer/              [Footer sections]
â”‚   â”œâ”€â”€ newsletter
â”‚   â”œâ”€â”€ navigation
â”‚   â””â”€â”€ legal
â”‚
â”œâ”€â”€ cart/                [Shopping]
â”‚   â”œâ”€â”€ states
â”‚   â”œâ”€â”€ actions
â”‚   â””â”€â”€ totals
â”‚
â””â”€â”€ [feature]/           [Feature-specific]
    â”œâ”€â”€ titles
    â”œâ”€â”€ descriptions
    â””â”€â”€ actions
```

## ğŸ” Type Safety Flow

```typescript
1. Config Definition
   â†“
   export type Locale = 'en' | 'az';
   export const LOCALES = ['en', 'az'] as const;

2. Context Types
   â†“
   interface LanguageContextType {
     locale: Locale;              // â† Type-safe
     setLocale: (locale: Locale) => void;
     availableLocales: readonly Locale[];
   }

3. Component Usage
   â†“
   const { locale, setLocale } = useLanguage();
   setLocale('az');  // âœ… Valid
   setLocale('fr');  // âŒ TypeScript Error

4. Translation Keys
   â†“
   const t = useTranslations('header');
   t('findAPaul');   // âœ… Autocomplete available
   t('invalid');     // âš ï¸ No runtime error, but IDE warning
```

## ğŸŒ URL Routing Strategy

### Strategy: "as-needed"
```
Default Locale (en): No prefix
/products
/about
/cart

Other Locales (az): With prefix
/az/products
/az/about
/az/cart
```

### Middleware Logic
```typescript
Request URL â†’ Middleware
              â†“
         Has /az/ prefix?
         â†™        â†˜
       YES        NO
        â†“          â†“
    locale=az   locale=en (default)
        â†“          â†“
    Add to       Add to
   Request      Request
        â†“          â†“
    Route to     Route to
     Page         Page
```

## ğŸ’¾ State Management

### Client State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    localStorage          â”‚
â”‚  key: 'paul-locale'      â”‚
â”‚  value: 'en' | 'az'      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LanguageContext         â”‚
â”‚  - locale: Locale        â”‚
â”‚  - setLocale: Function   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Components              â”‚
â”‚  - Read locale           â”‚
â”‚  - Change locale         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Server State
```
Request
  â†“
Middleware â†’ Extract locale from URL/headers
  â†“
Layout â†’ getLocale() â†’ Read from request
  â†“
Pass to Providers â†’ Available in Client
```

## ğŸ”„ Hot Reload Flow (Development)

```
Developer edits messages/en.json
         â†“
Next.js detects file change
         â†“
Triggers Hot Module Replacement
         â†“
Re-imports translation files
         â†“
Components re-render with new translations
         â†“
Page updates WITHOUT full refresh
```

## ğŸ“± Responsive Design

### Desktop
```
Header
â”œâ”€â”€ Logo
â”œâ”€â”€ Navigation Menu (translated)
â”œâ”€â”€ Search (placeholder translated)
â”œâ”€â”€ User Icon
â”œâ”€â”€ Cart Icon
â””â”€â”€ Globe Icon (Language Switcher) â† HERE
```

### Mobile
```
Header
â”œâ”€â”€ Logo
â”œâ”€â”€ Search Icon
â”œâ”€â”€ Cart Icon
â””â”€â”€ Hamburger Menu
    â†“ (opens)
    Mobile Menu
    â”œâ”€â”€ Navigation (translated)
    â”œâ”€â”€ My Account (translated)
    â”œâ”€â”€ Newsletter (translated)
    â””â”€â”€ [Language switcher in context menu]
```

## ğŸ¯ Performance Optimizations

1. **Code Splitting**
   - Only load active locale's translations
   - Lazy load other locales on demand

2. **Caching**
   - Translation files cached in memory
   - localStorage prevents re-fetch

3. **SSR**
   - Translations rendered on server
   - No flash of untranslated content

4. **Bundle Size**
   ```
   en.json: ~15KB
   az.json: ~15KB
   next-intl: ~50KB (minified)
   Total overhead: ~80KB
   ```

## ğŸ§ª Testing Strategy

```typescript
// Component Test
import { NextIntlClientProvider } from 'next-intl';

const messages = { header: { findAPaul: 'Find a PAUL' } };

render(
  <NextIntlClientProvider locale="en" messages={messages}>
    <Header />
  </NextIntlClientProvider>
);

expect(screen.getByText('Find a PAUL')).toBeInTheDocument();
```

## ğŸš€ Production Deployment

```
Build Process:
1. npm run build
   â†“
2. Next.js compiles with next-intl plugin
   â†“
3. Generates static pages for both locales
   â†“
4. Outputs:
   - /products/page.html (en)
   - /az/products/page.html (az)
   â†“
5. Deploy to hosting
```

## ğŸ”§ Maintenance

### Adding new translation:
```
1. Edit messages/en.json â†’ Add key
2. Edit messages/az.json â†’ Add translation
3. Use in component â†’ t('newKey')
4. Test both locales
5. Commit changes
```

### Adding new language:
```
1. Create messages/ru.json
2. Update LOCALES in config.ts
3. Add to LOCALE_NAMES mapping
4. Test routing /ru/
5. Deploy
```

---

**ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ»ĞµĞ´ÑƒĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ°Ğ¼:**
- âœ… SOLID (Single Responsibility, Dependency Inversion)
- âœ… DRY (Don't Repeat Yourself)
- âœ… KISS (Keep It Simple, Stupid)
- âœ… Separation of Concerns
- âœ… Type Safety
- âœ… Scalability

