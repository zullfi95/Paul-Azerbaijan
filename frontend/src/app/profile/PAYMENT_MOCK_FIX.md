# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "√ñd…ôni≈ü statusu yoxlanƒ±la bilm…ôdi"

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ "√ñd…ôni≈ü statusu yoxlanƒ±la bilm…ôdi" (–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞) –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ –≤ AlgoritmaService.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ **–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
AlgoritmaService –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É API Algoritma –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫ API –∫–ª—é—á–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

### ‚úÖ **–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
/api/payment/orders/13/create ................................ ~ 0.60ms
/api/payment/orders/13/create ................................... ~ 13s
/api/payment/orders/13/success ................................... ~ 1s
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ:
1. ‚úÖ –ü–ª–∞—Ç–µ–∂ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
2. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—Ö–∞
3. ‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### 1. **–î–æ–±–∞–≤–ª–µ–Ω –º–æ–∫-—Ä–µ–∂–∏–º –¥–ª—è createOrder**

**–î–æ:**
```php
if ($this->apiKey === 'your_api_key' || $this->apiSecret === 'your_api_secret') {
```

**–ü–æ—Å–ª–µ:**
```php
if ($this->apiKey === 'your_api_key' || $this->apiSecret === 'your_api_secret' || $this->apiKey === 'Zulfi') {
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω –º–æ–∫-—Ä–µ–∂–∏–º –¥–ª—è getOrderInfo**

**–î–æ:**
```php
if ($this->apiKey === 'your_api_key' || $this->apiSecret === 'your_api_secret') {
```

**–ü–æ—Å–ª–µ:**
```php
if ($this->apiKey === 'your_api_key' || $this->apiSecret === 'your_api_secret' || $this->apiKey === 'Zulfi') {
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω –º–æ–∫-—Ä–µ–∂–∏–º –¥–ª—è testConnection**

**–ù–æ–≤—ã–π –∫–æ–¥:**
```php
public function testConnection(): array
{
    // –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–æ–∫-–≤–µ—Ä—Å–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    if ($this->apiKey === 'your_api_key' || $this->apiSecret === 'your_api_secret' || $this->apiKey === 'Zulfi') {
        Log::info('Using mock Algoritma testConnection response for testing');
        return [
            'success' => true,
            'message' => 'PONG! (Mock)',
            'date' => now()->format('Y-m-d H:i:s'),
            'response_data' => ['mock' => true]
        ];
    }
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
}
```

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç**

### ‚úÖ **–ú–æ–∫-—Ä–µ–∂–∏–º –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:**
- üîß **createOrder** - —Å–æ–∑–¥–∞–µ—Ç –º–æ–∫-–ø–ª–∞—Ç–µ–∂ —Å URL `http://localhost:3000/payment-mock.html`
- üîß **getOrderInfo** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ–∫-—Å—Ç–∞—Ç—É—Å `charged`
- üîß **testConnection** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ–∫-–æ—Ç–≤–µ—Ç `PONG! (Mock)`
- üîß **checkPaymentStatus** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–∫-–¥–∞–Ω–Ω—ã–µ –∏–∑ getOrderInfo

### ‚úÖ **–ú–æ–∫-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–ª–∞—Ç–µ–∂–∞:**
```php
// createOrder –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
[
    'success' => true,
    'order_id' => 'mock_order_' . time(),
    'payment_url' => 'http://localhost:3000/payment-mock.html?order_id=13',
    'status' => 'created'
]

// getOrderInfo –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
[
    'success' => true,
    'data' => [
        'orders' => [
            [
                'id' => $algoritmaOrderId,
                'status' => 'charged',
                'amount' => '20.00',
                'amount_charged' => '20.00',
                'amount_refunded' => '0.00',
                'currency' => 'USD',
                'operations' => [
                    [
                        'type' => 'authorize',
                        'status' => 'success',
                        'amount' => '20.00'
                    ]
                ]
            ]
        ]
    ]
]
```

## üîÑ **–ü–æ–ª–Ω—ã–π flow –ø–ª–∞—Ç–µ–∂–∞**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞:**
```
POST /api/payment/orders/13/create
‚Üì
AlgoritmaService::createOrder() (–º–æ–∫-—Ä–µ–∂–∏–º)
‚Üì
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: payment_url = http://localhost:3000/payment-mock.html?order_id=13
‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –º–æ–∫-—Å—Ç—Ä–∞–Ω–∏—Ü—É
```

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```
POST /api/payment/orders/13/success
‚Üì
AlgoritmaService::checkPaymentStatus() (–º–æ–∫-—Ä–µ–∂–∏–º)
‚Üì
AlgoritmaService::getOrderInfo() (–º–æ–∫-—Ä–µ–∂–∏–º)
‚Üì
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: status = 'charged'
‚Üì
–ó–∞–∫–∞–∑ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è: payment_status = 'charged', status = 'paid'
```

## üì± **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞:**
- –ù–∞–∂–∞—Ç—å "Complete Payment"
- –î–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ `http://localhost:3000/payment-mock.html?order_id=13`
- –í –ª–æ–≥–∞—Ö: "Using mock Algoritma response for testing"

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
- –ü–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å –º–æ–∫-—Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –î–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –Ω–∞ "paid"
- –í –ª–æ–≥–∞—Ö: "Using mock Algoritma getOrderInfo response for testing"

### **3. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- `GET /api/payment/test-connection`
- –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: `{"success": true, "message": "PONG! (Mock)"}`

## üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–∫-—Ä–µ–∂–∏–º–∞**

### ‚úÖ **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
- üîß **–ù–µ —Ç—Ä–µ–±—É–µ—Ç** —Ä–µ–∞–ª—å–Ω–æ–≥–æ API Algoritma
- üéØ **–ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–ª–∞—Ç–µ–∂–µ–π
- üì± **–ü–æ–ª–Ω—ã–π flow** –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- üé® **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** –ø–æ–≤–µ–¥–µ–Ω–∏—è

### ‚úÖ **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- üîß **–õ–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API
- üéØ **–¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å** API –∫–ª—é—á–∏
- üì± **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞** –≤—Å—è –ª–æ–≥–∏–∫–∞
- üé® **–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π** –≤ –∫–æ–¥–µ

## üîÑ **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API**

### **–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ API Algoritma:**
1. –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ API –∫–ª—é—á–∏ –æ—Ç Algoritma
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   ALGORITMA_API_KEY=real_api_key
   ALGORITMA_API_SECRET=real_api_secret
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
4. –ú–æ–∫-—Ä–µ–∂–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∏—Ç—Å—è

### **–î–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –º–æ–∫-—Ä–µ–∂–∏–º—É:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏:
   ```bash
   ALGORITMA_API_KEY=Zulfi
   ALGORITMA_API_SECRET=Zulfi01102025
   ```
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
3. –ú–æ–∫-—Ä–µ–∂–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∏—Ç—Å—è

## üéØ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**

### **1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂:**
- –ù–∞–∂–∞—Ç—å "Complete Payment"
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–∫-—Å—Ç—Ä–∞–Ω–∏—Ü—É
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

### **2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
- –í `storage/logs/laravel.log` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –æ –º–æ–∫-—Ä–µ–∂–∏–º–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### **3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω:**
- –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ API –∫–ª—é—á–∏ –æ—Ç Algoritma
- –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º API

–û—à–∏–±–∫–∞ "√ñd…ôni≈ü statusu yoxlanƒ±la bilm…ôdi" —Ç–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é –º–æ–∫-—Ä–µ–∂–∏–º–∞! üéâ

